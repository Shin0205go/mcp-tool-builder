# プロバイダー互換性マトリクス

MCP Tool Builderでサポートされているすべてのプロバイダーの互換性マトリクスを定義します。

## 概要

MCP Tool Builderは、各機能タイプに対して複数のプロバイダーをサポートしています。このマトリクスは、どのプロバイダーが互いに互換性があり、どの機能をサポートしているかを示します。

## ストレージプロバイダー

| プロバイダー | ステータス | CRUD | トランザクション | マイグレーション | インデックス | 全文検索 | JSON対応 | 備考 |
|-------------|-----------|------|-----------------|----------------|-------------|----------|----------|------|
| **PostgreSQL** | ✅ 本番環境 | ✅ | ✅ | ✅ | ✅ | ✅ (tsvector) | ✅ (JSONB) | 本番環境推奨 |
| **MySQL** | ✅ 本番環境 | ✅ | ✅ | ✅ | ✅ | ✅ (FULLTEXT) | ✅ (JSON) | 高パフォーマンス |
| **MongoDB** | ✅ 本番環境 | ✅ | ⚠️ 制限あり | ✅ | ✅ | ✅ (text index) | ✅ ネイティブ | NoSQLオプション |
| **SQLite** | ✅ 開発環境 | ✅ | ✅ | ✅ | ✅ | ⚠️ FTS5 | ⚠️ 制限あり | 開発/テストのみ |
| **Google Sheets** | 🔄 ベータ | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ | プロトタイプのみ |
| **REST API** | 🔄 ベータ | ✅ | ⚠️ 依存 | ❌ | ❌ | ⚠️ 依存 | ⚠️ 依存 | カスタムエンドポイント |

### ストレージプロバイダー推奨事項

- **PostgreSQL**: 完全なSQL機能を必要とする本番アプリケーションに最適
- **MySQL**: PostgreSQLの優れた代替、パフォーマンスがやや優れる
- **MongoDB**: ドキュメント中心のアプリケーションやJSON柔軟性が重要な場合に選択
- **SQLite**: 開発、テスト、シングルユーザーアプリケーションに最適

## キュープロバイダー

| プロバイダー | ステータス | 信頼性 | 永続性 | スケジューリング | 優先度 | デッドレター | クラスタリング | 最大メッセージサイズ |
|-------------|-----------|--------|--------|-----------------|--------|-------------|---------------|-------------------|
| **Redis** | ✅ 本番環境 | ✅ 高 | ✅ | ✅ | ✅ | ✅ | ✅ | 512MB |
| **AWS SQS** | ✅ 本番環境 | ✅ 最高 | ✅ | ✅ | ❌ | ✅ | ✅ ネイティブ | 256KB |
| **Google Pub/Sub** | ✅ 本番環境 | ✅ 最高 | ✅ | ✅ | ❌ | ✅ | ✅ ネイティブ | 10MB |
| **Memory** | 🔧 開発環境 | ⚠️ 低 | ❌ | ⚠️ 制限あり | ✅ | ❌ | ❌ | RAM制限 |
| **RabbitMQ** | 🔄 ベータ | ✅ 高 | ✅ | ✅ | ✅ | ✅ | ✅ | 128MB |

### キュープロバイダー推奨事項

- **Redis**: ほとんどのアプリケーションで機能とパフォーマンスの最適なバランス
- **AWS SQS**: 最大の信頼性を必要とするAWSネイティブアプリケーションに選択
- **Google Pub/Sub**: 高スループットのイベント駆動アーキテクチャに最適
- **Memory**: 開発とテストのみ

## 認証プロバイダー

| プロバイダー | ステータス | 標準 | MFA | SSO | トークンタイプ | ユーザー管理 | セッション管理 | RBAC統合 |
|-------------|-----------|------|-----|-----|---------------|-------------|---------------|----------|
| **OAuth 2.0/OIDC** | ✅ 本番環境 | ✅ RFC | ✅ | ✅ | JWT/Opaque | ✅ 外部 | ✅ | ✅ クレームベース |
| **JWT** | ✅ 本番環境 | ✅ RFC 7519 | ❌ | ❌ | JWT | ⚠️ 外部 | ⚠️ ステートレス | ✅ クレームベース |
| **APIキー** | ✅ 本番環境 | カスタム | ❌ | ❌ | Opaque | ✅ 組み込み | ✅ | ✅ ロールベース |
| **Basic認証** | 🔧 開発環境 | HTTP Basic | ❌ | ❌ | なし | ✅ 組み込み | ❌ | ⚠️ 制限あり |
| **セッション** | ✅ 本番環境 | カスタム | ✅ | ❌ | セッションID | ✅ 組み込み | ✅ | ✅ 組み込み |

### 認証プロバイダー推奨事項

- **OAuth 2.0/OIDC**: SSO統合を必要とするエンタープライズアプリケーションに最適
- **JWT**: APIファーストアプリケーションとマイクロサービスに適している
- **APIキー**: サービス間通信にシンプルで効果的
- **セッション**: サーバーサイドレンダリングを使用する従来のWebアプリケーション

## 決済プロバイダー

| プロバイダー | ステータス | 対応地域 | 通貨 | 決済方法 | 定期支払い | Webhook | 返金 | マーケットプレイス |
|-------------|-----------|---------|------|---------|-----------|---------|------|------------------|
| **Stripe** | ✅ 本番環境 | グローバル | 135+ | カード、ウォレット、銀行 | ✅ | ✅ | ✅ | ✅ Connect |
| **PayPal** | ✅ 本番環境 | 200+国 | 25+ | PayPal、カード | ✅ | ✅ | ✅ | ❌ |
| **Square** | ✅ 本番環境 | 米、加、豪、日、英 | ローカル | カード、現金 | ✅ | ✅ | ✅ | ❌ |
| **Adyen** | 🔄 ベータ | グローバル | 150+ | カード、ローカル決済 | ✅ | ✅ | ✅ | ✅ MarketPay |

## 検索プロバイダー

| プロバイダー | ステータス | 全文検索 | ファセット | オートコンプリート | 分析 | リアルタイム | 言語対応 | スケーリング |
|-------------|-----------|---------|-----------|------------------|------|------------|---------|------------|
| **Elasticsearch** | ✅ 本番環境 | ✅ | ✅ | ✅ | ✅ Kibana | ✅ | 50+ | 水平 |
| **Algolia** | ✅ 本番環境 | ✅ | ✅ | ✅ | ✅ ダッシュボード | ✅ | 60+ | マネージド |
| **Typesense** | 🔄 ベータ | ✅ | ✅ | ✅ | ✅ | ✅ | 30+ | 水平 |
| **基本テキスト** | 🔧 開発環境 | ⚠️ 制限あり | ❌ | ❌ | ❌ | ✅ | 1 | 垂直のみ |

## LLMプロバイダー

| プロバイダー | ステータス | モデル | コンテキスト長 | ストリーミング | 関数呼び出し | ビジョン | コード | 価格 |
|-------------|-----------|--------|---------------|---------------|------------|---------|--------|------|
| **OpenAI** | ✅ 本番環境 | GPT-4、GPT-3.5 | 最大128k | ✅ | ✅ | ✅ GPT-4V | ✅ Codex | トークン単位 |
| **Anthropic** | ✅ 本番環境 | Claude 3ファミリー | 最大200k | ✅ | ✅ | ✅ | ✅ | トークン単位 |
| **Google** | 🔄 ベータ | Gemini Pro | 最大32k | ✅ | ✅ | ✅ | ✅ | トークン単位 |
| **ローカル (Ollama)** | 🔧 開発環境 | Llama、Mistral | 最大32k | ✅ | ⚠️ 制限あり | ❌ | ✅ | 無料 |

## プロバイダーの組み合わせ

### 推奨スタック

#### 🚀 **本番環境スタック**
- **ストレージ**: PostgreSQL
- **キュー**: Redis  
- **認証**: OAuth 2.0/OIDC
- **決済**: Stripe
- **検索**: Elasticsearch
- **LLM**: OpenAI/Anthropic

#### 💰 **コスト最適化スタック**
- **ストレージ**: MySQL
- **キュー**: Redis
- **認証**: JWT
- **決済**: PayPal
- **検索**: Typesense
- **LLM**: ローカル (Ollama)

#### 🔧 **開発環境スタック**
- **ストレージ**: SQLite
- **キュー**: Memory
- **認証**: Basic認証
- **決済**: Stripe（テストモード）
- **検索**: 基本テキスト
- **LLM**: OpenAI（制限付き）

### 非互換な組み合わせ

❌ **以下の組み合わせは避けてください：**

- SQLite + 高トラフィックアプリケーション（>1000同時ユーザー）
- Memoryキュー + 本番環境
- Basic認証 + 公開アプリケーション
- Google Sheets + 本番ワークロード

## 設定例

### PostgreSQL + Redis + OAuth
```yaml
providers:
  storage: postgres
  queue: redis
  auth: oauth
  
database:
  connection:
    host: postgres.example.com
    database: myapp
    username: ${DB_USER}
    password: ${DB_PASS}
    
queue:
  redis:
    host: redis.example.com
    port: 6379
    
auth:
  oauth:
    issuer: https://auth.example.com
    clientId: ${OAUTH_CLIENT_ID}
```

### MySQL + SQS + JWT
```yaml
providers:
  storage: mysql
  queue: sqs
  auth: jwt
  
database:
  connection:
    host: mysql.example.com
    database: myapp
    
queue:
  sqs:
    region: us-east-1
    queueUrl: ${SQS_QUEUE_URL}
    
auth:
  jwt:
    secret: ${JWT_SECRET}
    expiresIn: 7d
```

## プロバイダー移行パス

### ストレージ移行
- **SQLite → PostgreSQL**: 直接スキーマ移行対応
- **MySQL → PostgreSQL**: スキーマ変換が必要  
- **MongoDB → PostgreSQL**: データ変換が必要

### キュー移行
- **Memory → Redis**: 設定変更のみ
- **Redis → SQS**: メッセージ形式互換
- **SQS → Pub/Sub**: 再設計が必要

## パフォーマンス特性

### スループット（リクエスト/秒）

| プロバイダーカテゴリ | 低負荷 | 中負荷 | 高負荷 |
|-------------------|-------|--------|--------|
| **PostgreSQL** | 1,000 | 10,000 | 100,000+ |
| **MySQL** | 1,200 | 12,000 | 120,000+ |
| **MongoDB** | 800 | 8,000 | 80,000+ |
| **Redisキュー** | 10,000 | 100,000 | 1,000,000+ |
| **SQS** | 300 | 3,000 | 300,000+ |

### レイテンシー（95パーセンタイル）

| プロバイダー | ローカル | リージョナル | グローバル |
|------------|---------|------------|----------|
| **PostgreSQL** | <1ms | <10ms | <100ms |
| **Redis** | <1ms | <5ms | <50ms |
| **Elasticsearch** | <10ms | <50ms | <200ms |

## サポートマトリクス

### コミュニティサポート
✅ **優秀**: PostgreSQL、MySQL、Redis、OAuth  
🔄 **良好**: MongoDB、JWT、Stripe  
⚠️ **制限あり**: SQLite、Memoryキュー、Basic認証

### エンタープライズサポート
✅ **利用可能**: PostgreSQL、MySQL、MongoDB、Redis、OAuth、Stripe、Elasticsearch  
❌ **利用不可**: SQLite、Memoryキュー、Basic認証、Google Sheets

## 移行ツール

ビルダーは以下の移行ユーティリティを提供します：

- **スキーマ移行**: すべてのSQLプロバイダー
- **データ移行**: PostgreSQL ↔ MySQL、MongoDBエクスポート
- **設定移行**: すべてのプロバイダー
- **プロバイダー切り替え**: ランタイム設定変更

## 互換性テスト

各プロバイダーの組み合わせは以下でテストされています：
- ✅ 個別プロバイダーのユニットテスト
- ✅ プロバイダー組み合わせの統合テスト  
- ✅ 本番スタックの負荷テスト
- ✅ 完全なワークフローのエンドツーエンドテスト

---

**最終更新**: 2024-12-08  
**バージョン**: 2.0.0  
**互換性**: MCP Tool Builder 2.0.0+